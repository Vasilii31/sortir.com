{# sortie/_form_fields.html.twig #}

    {# Affichage des flash messages #}
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label == 'error' ? 'danger' : label }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endfor %}

<div class="row">
    <div class="col-md-6">
        {{ form_row(form.nom) }}
    </div>
    <div class="col-md-6">
        <p class=" my-1">Ville organisatrice :</p>
        <p>{{ form.vars.data.organisateur.site.nomSite }}</p>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        {{ form_row(form.datedebut) }}
    </div>

    <div class="col-md-6">
        {{ form_row(form.ville) }}
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        {{ form_row(form.datecloture) }}
    </div>


    <div class="col-md-6">
        {{ form_label(form.lieu) }}
        <div class="d-flex align-items-center gap-2">
            <div style="flex: 1;">
                {{ form_widget(form.lieu) }}
            </div>
            <button type="button" class="btn btn-outline-primary btn-sm" id="add-lieu-btn" title="Ajouter un nouveau lieu">
                <i class="bi bi-plus-lg"></i>
            </button>
        </div>
        {{ form_errors(form.lieu) }}
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        {{ form_row(form.duree) }}
    </div>

    <div class="col-md-6 my-2 position-realtive mt-3" id="lieu-details" style="display:none;">
        <div class="position-absolute">
            <p class=" my-1"><strong>Rue :</strong> <span id="rue-display"></span></p>
            <p class=" my-1"><strong>Code postal :</strong> <span id="ville-cp"></span></p>
            <p class=" my-1"><strong>Latitude :</strong> <span id="latitude"></span></p>
            <p class=" my-1"><strong>Longitude :</strong> <span id="longitude"></span></p>
        </div>
    </div>

</div>

<div class="row">
    <div class="col-md-6">
        {{ form_row(form.nbInscriptionsMax) }}
    </div>

</div>
<div class="row">

    <div class="col-md-6">
        {{ form_row(form.descriptionInfos) }}
    </div>


</div>
<div class="row my-2">
    <div class="col-md-6 mx-2">
        {{ form_row(form.isPrivate) }}
        {# Inclure les CSS/JS de Select2 #}


        {#        <button type="button" class="btn btn-outline-primary btn-sm" id="gerer-private-members-btn" title="Gérer les membres du groupe privé">#}
        {#            <i class="bi bi-plus-lg"></i>#}
        {#            <p>Gérer les membres du groupe privé</p>#}
        {#        </button>#}
        <div id="invites-block">
            {{ form_row(form.participantsPrives) }}
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {

        $('.select2-multi').select2({
            placeholder: "Choisissez des participants",
            allowClear: true,
            closeOnSelect: false
        });
    });

    const checkbox = document.querySelector('#{{ form.isPrivate.vars.id }}');
    // const privateMembersButton = document.querySelector('#gerer-private-members-btn');
    // privateMembersButton.addEventListener('click', function() {
    //
    // })
    const privateMembers =document.querySelector('#invites-block');
    function toggleInvites() {
        //privateMembersButton.style.display = checkbox.checked ? 'block' : 'none';
        privateMembers.style.display = checkbox.checked ? 'block' : 'none';

        }



    checkbox.addEventListener('change', toggleInvites);
    toggleInvites(); // au chargement
</script>


